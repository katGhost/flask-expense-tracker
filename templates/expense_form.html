{% extends "layout.html" %}

{% block title %}
  {% if mode=="edit" %}
    Edit Expense
  {% else %}
    Add Expense
  {% endif %}
{% endblock %}

{% block main %}
  <div class="main-container">
    <h3 class="mb-5">
      {% if mode == "edit" %}
        Edit Expense
      {% else %}
        Add Expense
      {% endif %}
    </h3>

    <!-- Form submission -->
    <div class="form-container">
      <form action="{% if mode == 'edit' %}/edit-expense/{{ expense.id }}{% else %}/add{% endif %}" method="POST">
        <div class="mb-4">
          <input value="{{ expense.income if expense else '' }}" autocomplete="off" autofocus class="form-control mx-auto custom-width-input" name="income" placeholder="Income" type="number" step="0.01">
        </div>
        <div class="mb-4">
          <input value="{{ expense.expense if expense else '' }}" autocomplete="off" autofocus class="form-control mx-auto custom-width-input" name="expense" placeholder="Expense" type="text">
        </div>
        <div class="mb-4">
          <input value="{{ expense.merchant if expense else '' }}" autocomplete="off" autofocus class="form-control mx-auto custom-width-input" name="merchant" placeholder="Merchant" type="text">
        </div>
        <div class="mb-4 category">
          <!-- User can modify categories and add own categories -->
          <label class="form-label">Category<span class="text-danger">*</span></label>
          <select class="form-select custom-select-input" name="category" required>
            {% for cat in categories %}
              <option value="{{ cat.name }}"
                      {% if expense and expense.category.name == cat.name %}selected{% endif %}>
                {{ cat.name }}
              </option>
            {% endfor %}
          </select>
        </div>
        <div class="mb-4 custom-currency-control">
          <!--<label class="form-label">Curreny<span class="text-danger">*</span></label>-->
          <input value="{{ expense.amount if expense else '' }}" autocomplete="off" autofocus="off" class="form-control mx-auto amount-input" name="amount" placeholder="Amount" type="number">
          <select class="form-select currency-select" name="currency" required>
            <option value="zar">ZAR</option>
            <option value="usd">USD</option>
            <option value="euro">EURO</option>
          </select>
        </div>
        <!-- Buttons to save entered information -->
        <div class="d-flex gap-3 mb3 mt-4">
        <!-- Save draft btn: saves to pdf file, Save btn: saves to history-->
        <!-- <button type="submit" name="action" value="save_file" class="save-draft-button">
          Save to file
        </button> -->
        <button type="submit" name="action" value="save_history" class="save-button">
          {% if mode == "edit" %}
            Update Expense
          {% else %}
            Add Expense
          {% endif %}
        </button>
      </div>
      </form>
      
    </div>
  </div>
  
{% endblock %}